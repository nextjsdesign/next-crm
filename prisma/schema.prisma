generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model User {
  id        String   @id @default(auto()) @map("_id") @db.ObjectId
  name      String
  email     String   @unique
  password  String
  role      String   @default("technician")
  workHours String?
  target    Int?
  bonus     Int?
  createdAt DateTime @default(now())

  // ğŸ”— un user poate avea mai multe fiÈ™e create
  devices Device[]
}

model Client {
  id        String   @id @default(auto()) @map("_id") @db.ObjectId
  name      String
  phone     String?
  email     String?
  address   String?
  createdAt DateTime @default(now())

  // ğŸ”— un client poate avea mai multe dispozitive/fiÈ™e
  devices   Device[]
}

model Device {
  id       String  @id @default(auto()) @map("_id") @db.ObjectId

  // ğŸ”— RelaÈ›ii
  clientId String  @db.ObjectId
  client   Client  @relation(fields: [clientId], references: [id])
  userId   String? @db.ObjectId
  user     User?   @relation(fields: [userId], references: [id])
  parentDeviceId  String?  @db.ObjectId // ğŸ”— legÄƒturÄƒ cu fiÈ™a/dispozitivul anterior

  // ğŸ§¾ Tip fiÈ™Äƒ & status
  sheetType   String?  // "NouÄƒ" sau "GaranÈ›ie"
  status      String   @default("Primire")

  // ğŸ§© Detalii generale
  deviceType   String?
  brand        String?
  model        String?
  serialNumber String?

  // âš™ï¸ Probleme & descrieri
  problem     String?
  description String?
  accessories String?
  technician  String?

  // ğŸ’° PreÈ›uri & garanÈ›ii
  priceEstimate  Float?
  advance        Float? // â• avans la predare
  warranty       String? // ğŸ› ï¸ "30 zile", "90 zile"
  priceConfirmed Boolean @default(false) // âœ… preÈ› confirmat la preluare

  // ğŸ§¾ InformaÈ›ii suplimentare
  liquidContact Boolean   @default(false) // ğŸ’§ contact cu lichide
  notes         String?
  deliveryDays  Int? // â±ï¸ termen Ã®n zile
  deliveryDate  DateTime?

  // ğŸ§¾ NotÄƒ recepÈ›ie / stare esteticÄƒ
  receptionCondition String? // ex: "ZgÃ¢rieturi uÈ™oare", "Carcasa spartÄƒ"
  receptionNotes     String? // note suplimentare: ex. "urme pe capac, lipsÄƒ È™urub"

  createdAt     DateTime  @default(now())
}